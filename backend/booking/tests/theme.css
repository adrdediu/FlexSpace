/*
 * FlexSpace -- pytest-html v4.2.0 Dark Theme
 * Usage: pytest --html=report.html --css=tests/theme.css
 *
 * v4 filter structure:
 *   <input class="filter" type="checkbox" data-test-result="passed" />
 *   <span class="filter passed">33 Passed</span>
 *   (no associated <label> -- the checkbox and span are siblings)
 */

@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=DM+Sans:wght@400;500;600;700&display=swap');

/* =========================================================
   TOKENS
   ========================================================= */
:root {
  --bg:        #0d1117;
  --surface:   #161b22;
  --card:      #1c2333;
  --border:    #30363d;
  --border-lo: rgba(48,54,61,0.6);
  --text:      #e6edf3;
  --muted:     #7d8590;
  --subtle:    #3d444d;

  --pass:      #3fb950;
  --fail:      #f85149;
  --fail-bg:   rgba(248,81,73,0.07);
  --error:     #ff7b72;
  --skip:      #e3b341;
  --xfail:     #bc8cff;
  --xpass:     #56d364;
  --accent:    #58a6ff;

  --font-ui:   'DM Sans', 'Segoe UI', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', 'Consolas', monospace;
  --radius:    8px;
}

/* =========================================================
   GLOBAL
   ========================================================= */
*, *::before, *::after { box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
  background: var(--bg) !important;
  color: var(--text) !important;
  font-family: var(--font-ui) !important;
  font-size: 14px !important;
  line-height: 1.6 !important;
  margin: 0 !important;
  padding: 0 32px !important;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--accent); text-decoration: none; }
a:hover { color: var(--accent); text-decoration: underline; }

/* =========================================================
   H1 TITLE
   ========================================================= */
h1 {
  font-family: var(--font-ui) !important;
  font-size: 20px !important;
  font-weight: 700 !important;
  color: var(--text) !important;
  padding: 28px 0 4px !important;
  margin: 0 !important;
  border: none !important;
  display: flex !important;
  align-items: center !important;
  gap: 10px !important;
  letter-spacing: -0.3px !important;
}

h1::before {
  content: 'FS';
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--accent);
  color: #fff;
  font-size: 11px;
  font-weight: 800;
  border-radius: 7px;
  flex-shrink: 0;
}

/* Generated-by line */
body > p {
  font-size: 12px !important;
  color: var(--muted) !important;
  margin: 2px 0 20px !important;
}
body > p a { color: var(--muted) !important; }
body > p a:hover { color: var(--accent) !important; }

/* =========================================================
   H2 SECTION HEADINGS
   ========================================================= */
h2 {
  font-size: 11px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 1.2px !important;
  color: var(--muted) !important;
  margin: 0 0 14px !important;
  padding: 0 !important;
  border: none !important;
}

/* =========================================================
   SECTION WRAPPERS
   ========================================================= */
#environment-wrapper,
#summary-wrapper,
#results-wrapper {
  background: var(--surface) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius) !important;
  padding: 20px 24px !important;
  margin-bottom: 20px !important;
}

/* =========================================================
   ENVIRONMENT TABLE
   ========================================================= */
#environment {
  width: 100% !important;
  border-collapse: collapse !important;
  background: transparent !important;
}

#environment tr,
#environment tr:nth-child(odd),
#environment tr:nth-child(even),
#environment tr:nth-of-type(odd),
#environment tr:nth-of-type(even) {
  background: transparent !important;
  background-color: transparent !important;
}

#environment tr:hover td {
  background: rgba(88,166,255,0.04) !important;
}

#environment td {
  padding: 8px 12px !important;
  border: none !important;
  border-bottom: 1px solid var(--border-lo) !important;
  font-size: 12px !important;
  color: var(--text) !important;
  background: transparent !important;
  background-color: transparent !important;
  vertical-align: top !important;
}

#environment tr:last-child td { border-bottom: none !important; }

#environment td:first-child {
  color: var(--muted) !important;
  font-family: var(--font-mono) !important;
  width: 200px !important;
  white-space: nowrap !important;
}

#environment td ul { margin: 0 !important; padding: 0 0 0 16px !important; }
#environment td ul li { font-size: 12px !important; color: var(--text) !important; line-height: 1.7 !important; }

/* =========================================================
   SUMMARY TEXT
   ========================================================= */
#summary-wrapper p {
  font-size: 13px !important;
  color: var(--muted) !important;
  margin: 0 0 14px !important;
}

/* =========================================================
   FILTER AREA
   v4 structure:
     <input class="filter" type="checkbox" data-test-result="passed">
     <span class="filter passed">33 Passed</span>,
     <input class="filter" type="checkbox" data-test-result="failed">
     <span class="filter failed">0 Failed</span>, ...
   ========================================================= */

/* Container that holds all filters */
#filter-container,
.filter-container,
[id*="filter-container"] {
  display: flex !important;
  flex-wrap: wrap !important;
  align-items: center !important;
  gap: 8px !important;
  margin-bottom: 16px !important;
}

/* The checkbox itself -- keep it visible and functional,
   just resize and recolour it to match the dark theme */
input.filter[type="checkbox"] {
  appearance: auto !important;
  -webkit-appearance: auto !important;
  width: 15px !important;
  height: 15px !important;
  margin: 0 4px 0 0 !important;
  cursor: pointer !important;
  accent-color: var(--accent) !important;
  vertical-align: middle !important;
  flex-shrink: 0 !important;
  /* Do NOT hide or set opacity/pointer-events -- v4 needs native clicks */
}

/* The span label next to the checkbox */
span.filter {
  font-size: 13px !important;
  font-weight: 600 !important;
  font-family: var(--font-ui) !important;
  color: #ffffff !important;
  cursor: pointer !important;
  vertical-align: middle !important;
  margin-right: 12px !important;
}

/* Per-outcome span colours */
span.filter.passed  { color: var(--pass)  !important; }
span.filter.failed  { color: var(--fail)  !important; }
span.filter.error   { color: var(--error) !important; }
span.filter.skipped { color: var(--skip)  !important; }
span.filter.xfailed { color: var(--xfail) !important; }
span.filter.xpassed { color: var(--xpass) !important; }
span.filter.rerun   { color: var(--muted) !important; }

/* Commas between filter items */
#summary-wrapper span + span { margin-left: 4px !important; }

/* Show / Hide all details buttons */
#show_all_details,
#hide_all_details {
  display: inline-flex !important;
  align-items: center !important;
  padding: 5px 14px !important;
  border-radius: 6px !important;
  border: 1px solid var(--border) !important;
  background: transparent !important;
  color: var(--muted) !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  font-family: var(--font-ui) !important;
  cursor: pointer !important;
  text-decoration: none !important;
  transition: all 0.15s !important;
  margin: 0 !important;
  vertical-align: middle !important;
}

#show_all_details:hover,
#hide_all_details:hover {
  background: var(--card) !important;
  color: var(--accent) !important;
  border-color: var(--accent) !important;
  text-decoration: none !important;
}

/* =========================================================
   RESULTS TABLE
   ========================================================= */
#results-table {
  width: 100% !important;
  border-collapse: collapse !important;
  background: transparent !important;
  margin: 0 !important;
}

#results-table thead th {
  background: var(--card) !important;
  color: var(--muted) !important;
  font-size: 11px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 1px !important;
  padding: 11px 16px !important;
  border: none !important;
  border-bottom: 1px solid var(--border) !important;
  text-align: left !important;
  white-space: nowrap !important;
}

/* Kill ALL default row backgrounds */
#results-table tbody tr,
#results-table tbody tr:nth-child(odd),
#results-table tbody tr:nth-child(even),
#results-table tbody tr:nth-of-type(odd),
#results-table tbody tr:nth-of-type(even) {
  background: transparent !important;
  background-color: transparent !important;
}

/* Outcome tints */
#results-table tbody tr.failed  > td { background: var(--fail-bg) !important; }
#results-table tbody tr.error   > td { background: rgba(255,123,114,0.07) !important; }
#results-table tbody tr.skipped > td { background: rgba(227,179,65,0.05) !important; }

#results-table tbody tr:not(.extras):hover > td {
  background: rgba(88,166,255,0.04) !important;
}

#results-table tbody td {
  padding: 10px 16px !important;
  border: none !important;
  border-bottom: 1px solid var(--border-lo) !important;
  font-size: 13px !important;
  vertical-align: middle !important;
  color: var(--text) !important;
  background: transparent !important;
  background-color: transparent !important;
}

#results-table tbody tr:last-child > td { border-bottom: none !important; }

/* Result badge */
#results-table td.col-result {
  font-weight: 700 !important;
  font-size: 11px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
  white-space: nowrap !important;
}

#results-table tr.passed  td.col-result { color: var(--pass)  !important; }
#results-table tr.failed  td.col-result { color: var(--fail)  !important; }
#results-table tr.error   td.col-result { color: var(--error) !important; }
#results-table tr.skipped td.col-result { color: var(--skip)  !important; }
#results-table tr.xfailed td.col-result { color: var(--xfail) !important; }
#results-table tr.xpassed td.col-result { color: var(--xpass) !important; }

#results-table td.col-result a {
  font-size: 10px !important;
  font-weight: 500 !important;
  color: var(--muted) !important;
  margin-left: 6px !important;
  text-transform: none !important;
  letter-spacing: 0 !important;
}
#results-table td.col-result a:hover { color: var(--accent) !important; }

/* Test name */
#results-table td.col-name {
  font-family: var(--font-mono) !important;
  font-size: 12px !important;
  word-break: break-all !important;
}

/* Duration */
#results-table td.col-duration {
  font-family: var(--font-mono) !important;
  font-size: 12px !important;
  color: var(--muted) !important;
  white-space: nowrap !important;
}

/* =========================================================
   EXTRAS / LOG ROWS  (expanded details)
   ========================================================= */
#results-table tr.extras,
#results-table tr.extras td,
#results-table tr.extra,
#results-table tr.extra td {
  background: transparent !important;
  background-color: transparent !important;
}

#results-table tr.extras > td,
#results-table tr.extra > td {
  padding: 0 16px 16px !important;
  border-bottom: 1px solid var(--border-lo) !important;
}

/* Any div wrapper inside extras */
#results-table tr.extras td > div,
#results-table tr.extra td > div {
  background: transparent !important;
  background-color: transparent !important;
}

/* Log / traceback block */
div.log,
.log {
  background: #0d1117 !important;
  background-color: #0d1117 !important;
  border: 1px solid var(--border) !important;
  border-left: 3px solid var(--fail) !important;
  border-radius: 6px !important;
  padding: 12px 14px !important;
  font-family: var(--font-mono) !important;
  font-size: 11.5px !important;
  line-height: 1.55 !important;
  color: #fca5a5 !important;
  white-space: pre-wrap !important;
  overflow-x: auto !important;
  margin: 0 !important;
  scrollbar-color: var(--subtle) transparent;
  scrollbar-width: thin;
}

div.log::-webkit-scrollbar { width: 6px; height: 6px; }
div.log::-webkit-scrollbar-track { background: transparent; }
div.log::-webkit-scrollbar-thumb { background: var(--subtle); border-radius: 3px; }
div.log::-webkit-scrollbar-thumb:hover { background: var(--muted); }

tr.skipped div.log { border-left-color: var(--skip)  !important; color: #fde68a !important; }
tr.passed  div.log { border-left-color: var(--pass)  !important; color: #86efac !important; }
tr.error   div.log { border-left-color: var(--error) !important; }

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
  body { padding: 0 12px !important; }
  #results-table thead th,
  #results-table tbody td { padding: 9px 10px !important; }
  #results-table td.col-name { max-width: 200px !important; }
}

body > div.summary > div.summary__data > p.filter {
    color:white;
}

body > div.summary > div.summary__data > p.run-count {
    color:white;
}

.filters > input.filter:not(:first-child) {
  margin-left: 16px !important;
}

.logwrapper {
    max-height: 230px;
    overflow-y: scroll;
    background-color: transparent;
}

#results-table {
     border: 1px solid transparent;
    color: #999;
    font-size: 12px;
    width: 100%;
    border-radius: 14px;
    background-color:transparent;
}

.logwrapper .logexpander {
    z-index: 1;
    position: sticky;
    top: 10px;
    width: max-content;
    border: 1px solid;
    border-radius: 3px;
    padding: 5px 7px;
    margin: 10px 0 10px calc(100% - 80px);
    cursor: pointer;
    background-color:transparent;
}